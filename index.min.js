!function(){var t={exports:{}},e=function(){"use strict";var t={},e=Math.imul||function(t,e){var r=65535&t,n=65535&e;return r*n+((t>>>16&65535)*n+r*(e>>>16&65535)<<16>>>0)|0},r=Math.round,n=Math.fround,i=function(t){return 0|e(0|(t|=0),0|t)},u=function(t){if(0==(0|(t=(0|t)>>>0))||1==(0|t))return 0|t;for(var e=1,r=1;(0|r)<=(0|t);)r=((e=(e+1|0)>>>0)*e|0)>>>0;return(e-1|0)>>>0},o=n(.8967),a=n(1.761),f=n(.342),s=Float32Array.of(o,a,f),_=n(1.185),c=n(.107),l=n(.112),b=Float32Array.of(_,c,l),g=Uint8Array.of(255,255,255,255),h=(0|u(255*o*255+255*a*255+255*f*255|0))>>>0,p=(255*o+255*a+255*f|0)>>>0,y=n(.03),d=n(1),m={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function w(t,e){return((t=(0|t)>>>0)+(e=(0|e)>>>0)|0)>>>0}function v(t,r){return(0|e(t=(0|t)>>>0,r=(0|r)>>>0))>>>0}function O(t){return((t=(0|t)>>>0)<<2|0)>>>0}function k(t,e){return((t=(0|t)>>>0)/(e=(0|e)>>>0)|0)>>>0}function P(t){return((t=(0|t)>>>0)>>1|0)>>>0}function j(t){return((t=(0|t)>>>0)>>2|0)>>>0}function A(t){return((t=(0|t)>>>0)>>5|0)>>>0}function U(t){return((t=(0|t)>>>0)>>6|0)>>>0}function q(t){return((t=(0|t)>>>0)/85-.012|0)>>>0}function x(t){return((t=(0|t)>>>0)>>7|0)>>>0}function M(t,e,r){return r|=0,0|((t|=0)<(e|=0)?e:t>r?r:t)}function C(t){return 255&(0|(0|t)>>>0)}function S(t){return 255&(255-(t=(0|t)>>>0)|0)}function z(t){return((t=(0|t)>>>0)>>8|0)>>>0}function I(t){return(0|(t=(0|t)>>>0))>>>0>>>0}function D(t){return(0|(t|=0))<0?0|-t:0|t}function F(t,e){return(t|=0)+(e|=0)|0}function B(t,e){return(t|=0)-(e|=0)|0}function L(t,e){return 0|((0|(t|=0))>(0|(e|=0))?t:e)}function E(t,e){return 0|((0|(t|=0))>(0|(e|=0))?e:t)}function G(t){return((t=n(t))<<8|0)>>>0}function H(t,e){return(0|(t=(0|t)>>>0))>>>0==(0|(e=(0|e)>>>0))>>>0&&!0}function J(t,e){return(0|(t=(0|t)>>>0))>>>0<=(0|(e=(0|e)>>>0))>>>0&&!0}function K(t){return(0|t)>>>0}var N={multiply_uint:v,multiply_uint_4:O,divide_uint:k,divide_2_uint:P,divide_4_uint:j,divide_16_uint:function(t){return((t=(0|t)>>>0)>>4|0)>>>0},divide_32_uint:A,divide_64_uint:U,divide_85_uint:q,divide_128_uint:x,abs_int:D,plus_uint:w,clamp_int:M,clamp_uint8:C,inverse_255:S,divide_255:z,uint_not_equal:function(t,e){return(0|(t=(0|t)>>>0))!=(0|(0|e)>>>0)},clamp_uint32:I,boolean_and:function(t,e){return(t|=0)&&(e|=0)},min_num:function(t,e){return 0|((0|(t|=0))<(0|(e|=0))?t:e)},max_num:function(t,e){return 0|((0|(t|=0))>(0|(e|=0))?t:e)},modulo_int:function(t,e){return(t|=0)%(e|=0)|0},modulo_uint:function(t,e){return((t=(0|t)>>>0)%(e=(0|e)>>>0)|0)>>>0},plus_int:F,minus_int:B,minus_uint:function(t,e){return((t=(0|t)>>>0)-(e=(0|e)>>>0)|0)>>>0},multiply_int:function(t,r){return 0|e(0|(t|=0),0|(r|=0))},divide_int:function(t,e){return(t|=0)/(e|=0)|0},multiply_255:G,max_int:L,min_int:E,max_uint:function(t,e){return((0|(t=(0|t)>>>0))>(0|(e=(0|e)>>>0))?t:0|e)>>>0},min_uint:function(t,e){return((0|(t=(0|t)>>>0))>(0|(e=(0|e)>>>0))?e:0|t)>>>0},int_equal:function(t,e){return(0|(t|=0))==(0|(e|=0))&&!0},int_not_equal:function(t,e){return(0|(t|=0))!=(0|(e|=0))&&!0},int_less:function(t,e){return(0|(t|=0))<(0|(e|=0))&&!0},int_less_equal:function(t,e){return(0|(t|=0))<=(0|(e|=0))&&!0},int_greater:function(t,e){return(0|(t|=0))>(0|(e|=0))&&!0},int_greater_equal:function(t,e){return(0|(t|=0))>=(0|(e|=0))&&!0},uint_equal:H,uint_less:function(t,e){return(0|(t=(0|t)>>>0))>>>0<(0|(e=(0|e)>>>0))>>>0&&!0},uint_less_equal:J,uint_greater:function(t,e){return(0|(t=(0|t)>>>0))>>>0>(0|(e=(0|e)>>>0))>>>0&&!0},uint_greater_equal:function(t,e){return(0|(t=(0|t)>>>0))>>>0>=(0|(e=(0|e)>>>0))>>>0&&!0},format_int:function(t){return 0|t},format_uint:K},Q=new ArrayBuffer(56),R=new Uint8Array(Q,0,4),T=new Uint8Array(Q,4,4),V=new Uint8Array(Q,8,4),W=new Uint8Array(Q,12,4),X=new Uint8Array(Q,16,4),Y=new Uint8Array(Q,20,4),Z=new Float32Array(Q,24,2),$=function(t,e,r){if(!(this instanceof $))return new $(t,e);e|=0,this.storage_uint8_=new Uint8Array(t,O(e),L(E(4,B(t.byteLength,O(e))),0)),this.tail_=r instanceof $?r:void 0};function tt(t,e){return C(k(w(t,e),2))}function et(t,r){return C(S(z(e(S(t),S(r)))))}function rt(t,e){return C(k(G(t),e))}function nt(t,r,n){return C(z(e(t,k(G(S(r)),n))))}$.new_zero=function(){return new $(X.slice(0,4).buffer)},$.new_splat=function(t){return Y.fill(C(t)),new $(Y.slice(0,4).buffer)},$.new_of=function(t,e,r,n){return Y[3]=C(t),Y[2]=C(e),Y[1]=C(r),Y[0]=C(n),new $(Y.slice(0,4).buffer)},$.new_safe_of=function(t,e,r,n){return Y[3]=M(t,0,255),Y[2]=M(e,0,255),Y[1]=M(r,0,255),Y[0]=M(n,0,255),new $(Y.slice(0,4).buffer)},$.new_from=function(t){return new $(t)},$.new_array=function(t){return Y[3]=C(t[0]),Y[2]=C(t[1]),Y[1]=C(t[2]),Y[0]=C(t[3]),new $(Y.slice(0,4).buffer)},$.new_array_safe=function(t){return Y[3]=C(M(t[0],0,255)),Y[2]=C(M(t[1],0,255)),Y[1]=C(M(t[2],0,255)),Y[0]=C(M(t[3],0,255)),new $(Y.slice(0,4).buffer)},$.new_bool=function(t,e,r,n){return Y[3]=(0|t)>0?1:0,Y[2]=(0|e)>0?1:0,Y[1]=(0|r)>0?1:0,Y[0]=(0|n)>0?1:0,new $(Y.slice(0,4).buffer)},$.new_uint32=function(t){return new $(Uint32Array.of(0|t).buffer)},$.new_hsla=function(t,e,r,n){let i,u,o;if(t/=360,r/=100,n/=100,0==(e/=100))i=u=o=r;else{function a(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t}const n=r<.5?r*(1+e):r+e-r*e,f=2*r-n;i=a(f,n,t+1/3),u=a(f,n,t),o=a(f,n,t-1/3)}return $.new_of(K(255*i),K(255*u),K(255*o),K(255*n))},$.new_hex=function(t){return $.new_uint32(parseInt(function(t){if(void 0===t)return"#00000000";if(m.hasOwnProperty(t))return m[t]+"ff";var e="",r="",n="",i="",u="#12345678";switch(0|t.length){case 9:u=t;break;case 7:u=t.concat("ff");break;case 5:e=t.charAt(1),r=t.charAt(2),n=t.charAt(3),i=t.charAt(4),u="#".concat(e,e,r,r,n,n,i,i);break;case 4:e=t.charAt(1),r=t.charAt(2),n=t.charAt(3),u="#".concat(e,e,r,r,n,n,"ff")}return u}(t).slice(1),16))},Object.defineProperty($.prototype,"tail",{get:function(){return this.tail_},enumerable:!1,configurable:!1}),Object.defineProperty($.prototype,"r",{get:function(){return C(this.storage_uint8_[3])},enumerable:!1,configurable:!1}),Object.defineProperty($.prototype,"g",{get:function(){return C(this.storage_uint8_[2])},enumerable:!1,configurable:!1}),Object.defineProperty($.prototype,"b",{get:function(){return C(this.storage_uint8_[1])},enumerable:!1,configurable:!1}),Object.defineProperty($.prototype,"a",{get:function(){return C(this.storage_uint8_[0])},enumerable:!1,configurable:!1}),Object.defineProperty($.prototype,"pos",{get:function(){var t=this.hsla;return(32*t[0]+16*t[2]+8*t[1]|0)>>>0},enumerable:!1,configurable:!1}),Object.defineProperty($.prototype,"z",{get:function(){return C(this.storage_uint8_[3])},enumerable:!1,configurable:!1}),Object.defineProperty($.prototype,"y",{get:function(){return C(this.storage_uint8_[2])},enumerable:!1,configurable:!1}),Object.defineProperty($.prototype,"x",{get:function(){return C(this.storage_uint8_[1])},enumerable:!1,configurable:!1}),Object.defineProperty($.prototype,"w",{get:function(){return C(this.storage_uint8_[0])},enumerable:!1,configurable:!1}),Object.defineProperty($.prototype,"uint32",{get:function(){return(this.storage_uint8_[3]<<24|this.storage_uint8_[2]<<16|this.storage_uint8_[1]<<8|this.storage_uint8_[0]|0)>>>0},enumerable:!1,configurable:!1}),Object.defineProperty($.prototype,"hex",{get:function(){return"#".concat("00000000".concat(this.uint32.toString(16)).slice(-8))},enumerable:!1,configurable:!1}),Object.defineProperty($.prototype,"hsla",{get:function(){var t=C(this.storage_uint8_[3]),e=C(this.storage_uint8_[2]),r=C(this.storage_uint8_[1]),n=C(this.storage_uint8_[0]);t=+t/255,e=+e/255,r=+r/255,n=+n/255;var i,u,o=Math.max(t,e,r),a=Math.min(t,e,r),f=(o+a)/2;if(o==a)i=u=0;else{var s=o-a;switch(u=f>.5?s/(2-o-a):s/(o+a),o){case t:i=(e-r)/s+(e<r?6:0);break;case e:i=(r-t)/s+2;break;case r:i=(t-e)/s+4}i/=6}return Array.of(360*i|0,100*u|0,100*f|0,100*n|0)},enumerable:!1,configurable:!1}),Object.defineProperty($.prototype,"rgbaon4bits",{get:function(){return(x(this.storage_uint8_[3])<<3|x(this.storage_uint8_[2])<<2|x(this.storage_uint8_[1])<<1|x(this.storage_uint8_[0])<<0|0)>>>0},enumerable:!1,configurable:!1}),Object.defineProperty($.prototype,"rgbaon6bits",{get:function(){return((16^q(this.storage_uint8_[3]))+(8^q(this.storage_uint8_[2]))+(4^q(this.storage_uint8_[1]))+(0^q(this.storage_uint8_[0]))|0)>>>0},enumerable:!1,configurable:!1}),Object.defineProperty($.prototype,"rgbaon8bits",{get:function(){return(U(this.storage_uint8_[3])<<6|U(this.storage_uint8_[2])<<4|U(this.storage_uint8_[1])<<2|U(this.storage_uint8_[0])<<0|0)>>>0},enumerable:!1,configurable:!1}),Object.defineProperty($.prototype,"rgbaon12bits",{get:function(){return(A(this.storage_uint8_[3])<<9|A(this.storage_uint8_[2])<<6|A(this.storage_uint8_[1])<<3|A(this.storage_uint8_[0])<<0|0)>>>0},enumerable:!1,configurable:!1}),Object.defineProperty($.prototype,"offset",{get:function(){return j(this.storage_uint8_.byteOffset)},enumerable:!1,configurable:!1}),Object.defineProperty($.prototype,"buffer",{get:function(){return this.storage_uint8_.buffer.slice(this.storage_uint8_.byteOffset,w(this.storage_uint8_.byteOffset,4))},enumerable:!1,configurable:!1}),Object.defineProperty($.prototype,"subarray",{get:function(){return this.storage_uint8_.subarray(0,4)},enumerable:!1,configurable:!1}),Object.defineProperty($.prototype,"set",{get:function(){return function(t){t instanceof $?this.set_from_simdope(t):this.set_from_array(t)}},enumerable:!1,configurable:!1}),Object.defineProperty($.prototype,"set_from_array",{get:function(){return function(t){this.storage_uint8_.set(t.subarray(0,4),0)}},enumerable:!1,configurable:!1}),Object.defineProperty($.prototype,"set_from_simdope",{get:function(){return function(t){this.storage_uint8_[0]=C(t.a),this.storage_uint8_[1]=C(t.b),this.storage_uint8_[2]=C(t.g),this.storage_uint8_[3]=C(t.r)}},enumerable:!1,configurable:!1}),Object.defineProperty($.prototype,"get_tail_and_reset",{get:function(){return function(){var t=this.tail_;return this.tail_=void 0,t}},enumerable:!1,configurable:!1}),Object.defineProperty($.prototype,"reset_tail",{get:function(){return function(){this.tail_=void 0}},enumerable:!1,configurable:!1}),Object.defineProperty($.prototype,"set_tail",{get:function(){return function(t,e){void 0!==e&&(e|=0,t.multiply_a_255(0|e)),this.tail_=t}},enumerable:!1,configurable:!1}),Object.defineProperty($.prototype,"simplify",{get:function(){return function(t){t=n(t),this.storage_uint8_[0]=v(r(this.a/t),t),this.storage_uint8_[1]=v(r(this.b/t),t),this.storage_uint8_[2]=v(r(this.g/t),t),this.storage_uint8_[3]=v(r(this.r/t),t)}},enumerable:!1,configurable:!1}),Object.defineProperty($.prototype,"normalize",{get:function(){return function(){var t=this.r+this.g+this.b|0;this.storage_uint8_[1]=M(this.b/t*3|0,0,255),this.storage_uint8_[2]=M(this.g/t*3|0,0,255),this.storage_uint8_[3]=M(this.r/t*3|0,0,255)}},enumerable:!1,configurable:!1}),Object.defineProperty($.prototype,"set_out_of",{get:function(){return function(t,e,r,n){return this.storage_uint8_[0]=C(t),this.storage_uint8_[1]=C(e),this.storage_uint8_[2]=C(r),this.storage_uint8_[3]=C(n),this}},enumerable:!1,configurable:!1}),Object.defineProperty($.prototype,"slice",{get:function(){return this.storage_uint8_.slice(0,4)},enumerable:!1,configurable:!1}),Object.defineProperty($.prototype,"skin",{get:function(){var t=(this.b+this.g+this.r|0)>>>0;if((0|t)>0){Y[0]=M((3*this.r|0)/t|0,0,255),Y[1]=M((3*this.g|0)/t|0,0,255),Y[2]=M((3*this.b|0)/t|0,0,255);var e=i((Y[0]+Y[1]+Y[2]|0)>>>0|0)>>>0;return n(Y[0]/Y[1])>b[0]&&n(((Y[0]*Y[2]|0)>>>0)/e)>b[1]&&n(((Y[0]*Y[1]|0)>>>0)/e)>b[2]}return!1},enumerable:!1,configurable:!1}),$.blend_all=function(t,e,r){var i,u,o,a=t.r,f=t.g,s=t.b,_=t.a,c=1,l=0|e.length;for(o=0;o<l;o++)i=e[o],c+=u=n(r[o]),a+=i.r*u|0,f+=i.g*u|0,s+=i.b*u|0,_+=i.a*u|0;for(Y[0]=C(_/c|0),Y[1]=C(s/c|0),Y[2]=C(f/c|0),Y[3]=C(a/c|0),t.set_from_array(Y),o=0;o<l;o++)e[o].set_from_array(Y)},$.prototype.blend_with_tails=function(t){t|=0;for(var e=0,r=this.get_tail_and_reset();r instanceof $;)e=C(0!=(0|t)?P(w(this.a,r.a)):S(z(v(S(r.a),S(this.a))))),$.merge_scale_of_255_a_fixed(r,k(G(r.a),e),this,z(v(this.a,k(G(S(r.a)),e))),e),r=r.get_tail_and_reset()},$.prototype.blend_with=function(t,e,r,n){if(r|=0,n|=0,e|=0,t.multiply_a_255(0|e),0==(0|r))return e=C(0!=(0|n)?P(w(this.a,t.a)):S(z(v(S(t.a),S(this.a))))),$.merge_scale_of_255_a_fixed(t,k(G(t.a),e),this,z(v(this.a,k(G(S(t.a)),e))),e);this.is_fully_transparent()?t.set_from_array(X):t.is_fully_transparent()&&this.set_from_array(X)},$.prototype.get_difference_with=function(t){return $.new_of(D(this.r,t.r),D(this.g,t.g),D(this.b,t.b),D(this.a,t.a))},$.prototype.sum_rgba=function(){return w(w(this.r,this.g),w(this.b,this.a))},$.prototype.sum_rgb=function(){return w(w(this.r,this.g),this.b)},$.prototype.is_dark=function(){return J(this.sum_rgb(),384)},$.prototype.is_skin=function(){return this.skin},$.prototype.is_not_skin=function(){return!this.skin},$.prototype.is_fully_transparent=function(){return H(this.a,0)},$.prototype.is_fully_opaque=function(){return H(this.a,255)},$.prototype.is_not_fully_transparent=function(){return!this.is_fully_transparent()},$.prototype.is_not_fully_opaque=function(){return!this.is_fully_opaque()},$.prototype.match_with=function(t,e){return 255==(e=(0|e)>>>0)||(0===e?this.uint32==t.uint32:D(this.r-t.r|0)<(0|e)&&D(this.g-t.g|0)<(0|e)&&D(this.b-t.b|0)<(0|e)&&D(this.a-t.a|0)<(0|e)&&!0)},$.prototype.euclidean_match_with=function(t,e){return e=n(e),Z[0]=n(d-n(D(this.a-t.a|0)/g[3])),Z[1]=n(Z[0]*Z[0]-y),n(u(s[0]*i(this.r-t.r|0)+s[1]*i(this.g-t.g|0)+s[2]*i(this.b-t.b|0)|0)/h)<n(e*Z[1])},$.prototype.manhattan_match_with=function(t,e){return e=n(e),Z[0]=n(d-n(D(this.a-t.a|0)/g[3])),Z[1]=n(Z[0]*Z[0]-y),n((s[0]*D(this.r-t.r|0)+s[1]*D(this.g-t.g|0)+s[2]*D(this.b-t.b|0)|0)/p)<n(e*Z[1])},$.prototype.set_r=function(t){return this.subarray[3]=C(t),this},$.prototype.set_g=function(t){return this.subarray[2]=C(t),this},$.prototype.set_b=function(t){return this.subarray[1]=C(t),this},$.prototype.set_a=function(t){return this.subarray[0]=C(t),this},$.prototype.to_greyscale=function(t){var e=this.subarray;return e[1]=e[2]=e[3]=C(this.sum_rgb()/3|0),this},$.prototype.to_greyscale_luma=function(t){var e=this.subarray;return e[1]=e[2]=e[3]=C((this.r*s[0]+this.g*s[1]+this.b*s[2])/3|0),this},$.prototype.multiply_a_255=function(t){this.subarray[0]=C(z(v(0|this.a,0|t)))},$.prototype.copy=function(){return new $(this.slice.buffer)},$.with_r=function(t,e){var r=t.slice;return r[3]=C(e),new $(r.buffer)},$.with_g=function(t,e){var r=t.slice;return r[2]=C(e),new $(r.buffer)},$.with_b=function(t,e){var r=t.slice;return r[1]=C(e),new $(r.buffer)},$.with_a=function(t,e){var r=t.slice;return r[0]=C(e),new $(r.buffer)},$.with_inverse=function(t){var e=t.slice;return e[3]=S(e[3]),e[2]=S(e[2]),e[1]=S(e[1]),e[0]=S(e[0]),new $(e.buffer)},$.match=function(t,e,r){return t.match_with(e,r)},$.blend=function(t,e,r,n,i){return t.copy().blend_with(e,r,n,i)},$.prototype.merge_with_a_fixed=function(t,e){e=C(e);var r=this.subarray;r[0]=C(e),r[1]=w(this.b,t.b),r[2]=w(this.g,t.g),r[3]=w(this.r,t.r),t.set_from_simdope(this)},$.merge_scale_of_255_a_fixed=function(t,e,r,n,i){return e=C(e),n=C(n),i=C(i),$.scale_rgb_of_on_255(t,e,e,e),$.scale_rgb_of_on_255(r,n,n,n),$.merge_with_a_fixed(t,r,i),t},$.scale_rgb_of_on_255=function(t,e,r,n){var i=t.subarray;i[0]=0,i[1]=z(v(t.b,n)),i[2]=z(v(t.g,r)),i[3]=z(v(t.r,e))},$.merge_with_a_fixed=function(t,e,r){var n=t.subarray;n[0]=C(r),n[1]=w(t.b,e.b),n[2]=w(t.g,e.g),n[3]=w(t.r,e.r),e.set_from_simdope(t)},$.blend_all_four=function(t,e,r,n,i,u,o,a,f,s,_,c,l,b){b|=0,0!=(l|=0)&&((t.is_fully_transparent()||i.is_fully_transparent())&&(W[0]=1),(e.is_fully_transparent()||u.is_fully_transparent())&&(W[1]=1),(r.is_fully_transparent()||o.is_fully_transparent())&&(W[2]=1),(n.is_fully_transparent()||a.is_fully_transparent())&&(W[3]=1)),f=C(f),s=C(s),_=C(_),c=C(c),i.multiply_a_255(f),u.multiply_a_255(s),o.multiply_a_255(_),a.multiply_a_255(c),0!=(0|b)?(R[0]=tt(t.a,f),R[1]=tt(e.a,s),R[2]=tt(r.a,_),R[3]=tt(n.a,c)):(R[0]=et(i.a,t.a),R[1]=et(u.a,e.a),R[2]=et(o.a,r.a),R[3]=et(a.a,n.a)),T[0]=rt(i.a,R[0]),T[1]=rt(u.a,R[1]),T[2]=rt(o.a,R[2]),T[3]=rt(a.a,R[3]),V[0]=nt(t.a,i.a,R[0]),V[1]=nt(e.a,u.a,R[1]),V[2]=nt(r.a,o.a,R[2]),V[3]=nt(n.a,a.a,R[3]),i.set_out_of(0,z(v(i.b,T[0])),z(v(i.g,T[0])),z(v(i.r,T[0]))),u.set_out_of(0,z(v(u.b,T[1])),z(v(u.g,T[1])),z(v(u.r,T[1]))),o.set_out_of(0,z(v(o.b,T[2])),z(v(o.g,T[2])),z(v(o.r,T[2]))),a.set_out_of(0,z(v(a.b,T[3])),z(v(a.g,T[3])),z(v(a.r,T[3]))),t.set_out_of(0,z(v(t.b,V[0])),z(v(t.g,V[0])),z(v(t.r,V[0]))),e.set_out_of(0,z(v(e.b,V[1])),z(v(e.g,V[1])),z(v(e.r,V[1]))),r.set_out_of(0,z(v(r.b,V[2])),z(v(r.g,V[2])),z(v(r.r,V[2]))),n.set_out_of(0,z(v(n.b,V[3])),z(v(n.g,V[3])),z(v(n.r,V[3]))),t.merge_with_a_fixed(i,R[0]),e.merge_with_a_fixed(u,R[1]),r.merge_with_a_fixed(o,R[2]),n.merge_with_a_fixed(a,R[3]),0!=(0|W[0])&&(t.set_out_of(0,0,0,0),i.set_out_of(0,0,0,0)),0!=(0|W[1])&&(e.set_out_of(0,0,0,0),u.set_out_of(0,0,0,0)),0!=(0|W[2])&&(r.set_out_of(0,0,0,0),o.set_out_of(0,0,0,0)),0!=(0|W[3])&&(n.set_out_of(0,0,0,0),a.set_out_of(0,0,0,0))},$.plus=function(t,e){return Y[3]=C(E(255,F(t.r,e.r))),Y[2]=C(E(255,F(t.g,e.g))),Y[1]=C(E(255,F(t.b,e.b))),Y[0]=C(E(255,F(t.a,e.a))),new $(Y.slice(0,4).buffer)},$.minus=function(t,e){return Y[3]=C(L(0,B(t.r,e.r))),Y[2]=C(L(0,B(t.g,e.g))),Y[1]=C(L(0,B(t.b,e.b))),Y[0]=C(L(0,B(t.a,e.a))),new $(Y.slice(0,4).buffer)},$.average=function(t,e){return Y[3]=C(P(w(t.r,e.r))),Y[2]=C(P(w(t.g,e.g))),Y[1]=C(P(w(t.b,e.b))),Y[0]=C(P(w(t.a,e.a))),new $(Y.slice(0,4).buffer)};var it=function(t,e,r){if(!(this instanceof it))return new it(t);void 0!==t?void 0!==t.data?this.storage_=new Uint32Array(t.data.slice(0,t.data.length).reverse().buffer).reverse().buffer:void 0!==t.buffer?this.storage_=t.buffer:this.storage_=t:this.storage_=new ArrayBuffer(0),e|=0,r=0|r||0|this.storage_.byteLength,this.storage_uint8_array_=new Uint8Array(this.storage_,e,r),this.storage_uint32_array_=new Uint32Array(this.storage_,e,j(r))};return Object.defineProperty(it.prototype,"length",{get:function(){return this.storage_uint32_array_.length},enumerable:!1,configurable:!1}),Object.defineProperty(it.prototype,"buffer",{get:function(){return this.storage_uint8_array_.buffer},enumerable:!1,configurable:!1}),Object.defineProperty(it.prototype,"buffer_setUint8",{get:function(){return function(t,e){return this.storage_uint8_array_[0|t]=C(0|e)}},enumerable:!1,configurable:!1}),Object.defineProperty(it.prototype,"get_deduplicated_uint32a",{get:function(){return function(t){return Uint32Array.from(new Set(this.storage_uint32_array_))}},enumerable:!1,configurable:!1}),Object.defineProperty(it.prototype,"buffer_getUint8",{get:function(){return function(t){return this.storage_uint8_array_[0|t]}},enumerable:!1,configurable:!1}),Object.defineProperty(it.prototype,"buffer_getUint8a",{get:function(){return function(t,e){return e=w(t|=0,O(e=(e|=0)||1)),this.storage_uint8_array_.subarray(t,e)}},enumerable:!1,configurable:!1}),Object.defineProperty(it.prototype,"buffer_setUint32",{get:function(){return function(t,e){this.storage_uint32_array_[0|t]=I(e)}},enumerable:!1,configurable:!1}),Object.defineProperty(it.prototype,"buffer_getUint32",{get:function(){return function(t){return this.storage_uint32_array_[0|t]}},enumerable:!1,configurable:!1}),Object.defineProperty(it.prototype,"subarray_uint32",{get:function(){return function(t,e){return t|=0,e=(e|=0)||this.length,this.storage_uint32_array_.subarray(t,e)}},enumerable:!1,configurable:!1}),Object.defineProperty(it.prototype,"slice_uint32",{get:function(){return function(t,e){return t|=0,e=(e|=0)||this.length,this.storage_uint32_array_.slice(t,e)}},enumerable:!1,configurable:!1}),Object.defineProperty(it.prototype,"subarray_uint8",{get:function(){return function(t,e){return t|=0,e|=0,this.storage_uint8_array_.subarray(O(t),O(e))}},enumerable:!1,configurable:!1}),Object.defineProperty(it.prototype,"slice_uint8",{get:function(){return function(t,e){return t|=0,e|=0,this.storage_uint8_array_.slice(O(t),O(e))}},enumerable:!1,configurable:!1}),it.prototype.get_image_data=function(){return new Uint8Array(this.slice_uint32(0,this.length).reverse().buffer).reverse()},it.prototype.get_element=function(t){return new $(this.buffer,0|t)},it.prototype.subarray=function(t,e){return this.buffer_getUint8a(0|t,0|e)},it.prototype.set_element=function(t,e){this.buffer_setUint32(0|t,I(e.uint32))},it.prototype.set_uint32_element=function(t,e){this.buffer_setUint32(0|t,I(e))},it.prototype.get_uint32_element=function(t){return t|=0,this.buffer_getUint32(t)},it.prototype.get_sub_uint8a=function(t,e){return t|=0,e|=0,this.buffer_getUint8a(O(t),e)},it.prototype.get_slice_uint8a=function(t,e){return t|=0,e|=0,this.buffer_getUint8a(O(t),e).slice(0,O(e||1))},it.prototype.get_buffer=function(t,e){return t|=0,e|=0,this.buffer_getUint8a(O(t),e).buffer},t.simdops=N,t.Color=$,t.SIMDopeColor=t.Color,t.Colors=it,t.SIMDopeColors=t.Colors,t}();t?t.exports=e:window.SIMDOPE=e,t=t.exports}();