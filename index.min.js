!function(){var t={exports:{}},e=function(){"use strict";var t={},e=Math.imul||function(t,e){var r=65535&t,n=65535&e;return r*n+((t>>>16&65535)*n+r*(e>>>16&65535)<<16>>>0)|0},r=Math.round,n=Math.fround,i=function(t){return 0|e(0|(t|=0),0|t)},u=function(t){if(0==(0|(t=(0|t)>>>0))||1==(0|t))return 0|t;for(var e=1,r=1;(0|r)<=(0|t);)r=((e=(e+1|0)>>>0)*e|0)>>>0;return(e-1|0)>>>0},o=n(.8967),a=n(1.761),f=n(.342),s=Float32Array.of(o,a,f),_=n(1.185),c=n(.107),l=n(.112),b=(Float32Array.of(_,c,l),Uint8Array.of(255,255,255,255));const g=n(.96422),h=n(.82521),p=n(4/29),y=n(6/29),d=3*y*y,m=y*y*y;function w(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function v(t){return t>m?Math.pow(t,1/3):t/d+p}var O=(0|u(255*o*255+255*a*255+255*f*255|0))>>>0,P=(255*o+255*a+255*f|0)>>>0,j=u(42768)>>>0,k=n(.03),A=n(1),U={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function q(t,e){return((t=(0|t)>>>0)+(e=(0|e)>>>0)|0)>>>0}function x(t,r){return(0|e(t=(0|t)>>>0,r=(0|r)>>>0))>>>0}function M(t){return((t=(0|t)>>>0)<<2|0)>>>0}function C(t,e){return((t=(0|t)>>>0)/(e=(0|e)>>>0)|0)>>>0}function S(t){return((t=(0|t)>>>0)>>1|0)>>>0}function z(t){return((t=(0|t)>>>0)>>2|0)>>>0}function F(t){return((t=(0|t)>>>0)>>5|0)>>>0}function I(t){return((t=(0|t)>>>0)>>6|0)>>>0}function D(t){return((t=(0|t)>>>0)/85-.012|0)>>>0}function L(t){return((t=(0|t)>>>0)>>7|0)>>>0}function B(t,e,r){return r|=0,0|((t|=0)<(e|=0)?e:t>r?r:t)}function E(t){return 255&(0|(0|t)>>>0)}function G(t){return 255&(255-(t=(0|t)>>>0)|0)}function H(t){return((t=(0|t)>>>0)>>8|0)>>>0}function J(t){return(0|(t=(0|t)>>>0))>>>0>>>0}function K(t){return(0|(t|=0))<0?0|-t:0|t}function N(t,e){return(t|=0)+(e|=0)|0}function Q(t,e){return(t|=0)-(e|=0)|0}function R(t,e){return 0|((0|(t|=0))>(0|(e|=0))?t:e)}function T(t,e){return 0|((0|(t|=0))>(0|(e|=0))?e:t)}function V(t){return((t=n(t))<<8|0)>>>0}function W(t,e){return(0|(t=(0|t)>>>0))>>>0==(0|(e=(0|e)>>>0))>>>0&&!0}function X(t,e){return(0|(t=(0|t)>>>0))>>>0<=(0|(e=(0|e)>>>0))>>>0&&!0}function Y(t){return(0|t)>>>0}var Z={multiply_uint:x,multiply_uint_4:M,divide_uint:C,divide_2_uint:S,divide_4_uint:z,divide_16_uint:function(t){return((t=(0|t)>>>0)>>4|0)>>>0},divide_32_uint:F,divide_64_uint:I,divide_85_uint:D,divide_128_uint:L,abs_int:K,plus_uint:q,clamp_int:B,clamp_uint8:E,inverse_255:G,divide_255:H,uint_not_equal:function(t,e){return(0|(t=(0|t)>>>0))!=(0|(0|e)>>>0)},clamp_uint32:J,boolean_and:function(t,e){return(t|=0)&&(e|=0)},min_num:function(t,e){return 0|((0|(t|=0))<(0|(e|=0))?t:e)},max_num:function(t,e){return 0|((0|(t|=0))>(0|(e|=0))?t:e)},modulo_int:function(t,e){return(t|=0)%(e|=0)|0},modulo_uint:function(t,e){return((t=(0|t)>>>0)%(e=(0|e)>>>0)|0)>>>0},plus_int:N,minus_int:Q,minus_uint:function(t,e){return((t=(0|t)>>>0)-(e=(0|e)>>>0)|0)>>>0},multiply_int:function(t,r){return 0|e(0|(t|=0),0|(r|=0))},divide_int:function(t,e){return(t|=0)/(e|=0)|0},multiply_255:V,max_int:R,min_int:T,max_uint:function(t,e){return((0|(t=(0|t)>>>0))>(0|(e=(0|e)>>>0))?t:0|e)>>>0},min_uint:function(t,e){return((0|(t=(0|t)>>>0))>(0|(e=(0|e)>>>0))?e:0|t)>>>0},int_equal:function(t,e){return(0|(t|=0))==(0|(e|=0))&&!0},int_not_equal:function(t,e){return(0|(t|=0))!=(0|(e|=0))&&!0},int_less:function(t,e){return(0|(t|=0))<(0|(e|=0))&&!0},int_less_equal:function(t,e){return(0|(t|=0))<=(0|(e|=0))&&!0},int_greater:function(t,e){return(0|(t|=0))>(0|(e|=0))&&!0},int_greater_equal:function(t,e){return(0|(t|=0))>=(0|(e|=0))&&!0},uint_equal:W,uint_less:function(t,e){return(0|(t=(0|t)>>>0))>>>0<(0|(e=(0|e)>>>0))>>>0&&!0},uint_less_equal:X,uint_greater:function(t,e){return(0|(t=(0|t)>>>0))>>>0>(0|(e=(0|e)>>>0))>>>0&&!0},uint_greater_equal:function(t,e){return(0|(t=(0|t)>>>0))>>>0>=(0|(e=(0|e)>>>0))>>>0&&!0},format_int:function(t){return 0|t},format_uint:Y},$=new ArrayBuffer(56),tt=new Uint8Array($,0,4),et=new Uint8Array($,4,4),rt=new Uint8Array($,8,4),nt=new Uint8Array($,12,4),it=new Uint8Array($,16,4),ut=new Uint8Array($,20,4),ot=new Float32Array($,24,2),at=function(t,e,r){if(!(this instanceof at))return new at(t,e,r);e|=0,this.storage_uint8_=new Uint8Array(t,M(e),R(T(4,Q(t.byteLength,M(e))),0)),this.tail_=r instanceof at?r:void 0};function ft(t,e){return E(C(q(t,e),2))}function st(t,r){return E(G(H(e(G(t),G(r)))))}function _t(t,e){return E(C(V(t),e))}function ct(t,r,n){return E(H(e(t,C(V(G(r)),n))))}at.new_zero=function(){return new at(it.slice(0,4).buffer)},at.new_splat=function(t){return ut.fill(E(t)),new at(ut.slice(0,4).buffer)},at.new_of=function(t,e,r,n){return ut[3]=E(t),ut[2]=E(e),ut[1]=E(r),ut[0]=E(n),new at(ut.slice(0,4).buffer)},at.new_safe_of=function(t,e,r,n){return ut[3]=B(t,0,255),ut[2]=B(e,0,255),ut[1]=B(r,0,255),ut[0]=B(n,0,255),new at(ut.slice(0,4).buffer)},at.new_from=function(t){return new at(t)},at.new_array=function(t){return ut[3]=E(t[0]),ut[2]=E(t[1]),ut[1]=E(t[2]),ut[0]=E(t[3]),new at(ut.slice(0,4).buffer)},at.new_array_safe=function(t){return ut[3]=E(B(t[0],0,255)),ut[2]=E(B(t[1],0,255)),ut[1]=E(B(t[2],0,255)),ut[0]=E(B(t[3],0,255)),new at(ut.slice(0,4).buffer)},at.new_bool=function(t,e,r,n){return ut[3]=(0|t)>0?1:0,ut[2]=(0|e)>0?1:0,ut[1]=(0|r)>0?1:0,ut[0]=(0|n)>0?1:0,new at(ut.slice(0,4).buffer)},at.new_uint32=function(t){return new at(Uint32Array.of(0|t).buffer)},at.new_hsla=function(t,e,r,n){let i,u,o;if(t/=360,r/=100,n/=100,0==(e/=100))i=u=o=r;else{function a(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t}const n=r<.5?r*(1+e):r+e-r*e,f=2*r-n;i=a(f,n,t+1/3),u=a(f,n,t),o=a(f,n,t-1/3)}return at.new_of(Y(255*i),Y(255*u),Y(255*o),Y(255*n))},at.new_hex=function(t){return at.new_uint32(parseInt(function(t){if(void 0===t)return"#00000000";if(U.hasOwnProperty(t))return U[t]+"ff";var e="",r="",n="",i="",u="#12345678";switch(0|t.length){case 9:u=t;break;case 7:u=t.concat("ff");break;case 5:e=t.charAt(1),r=t.charAt(2),n=t.charAt(3),i=t.charAt(4),u="#".concat(e,e,r,r,n,n,i,i);break;case 4:e=t.charAt(1),r=t.charAt(2),n=t.charAt(3),u="#".concat(e,e,r,r,n,n,"ff")}return u}(t).slice(1),16))},Object.defineProperty(at.prototype,"tail",{get:function(){return this.tail_},enumerable:!1,configurable:!1}),Object.defineProperty(at.prototype,"r",{get:function(){return E(this.storage_uint8_[3])},enumerable:!1,configurable:!1}),Object.defineProperty(at.prototype,"g",{get:function(){return E(this.storage_uint8_[2])},enumerable:!1,configurable:!1}),Object.defineProperty(at.prototype,"b",{get:function(){return E(this.storage_uint8_[1])},enumerable:!1,configurable:!1}),Object.defineProperty(at.prototype,"a",{get:function(){return E(this.storage_uint8_[0])},enumerable:!1,configurable:!1}),Object.defineProperty(at.prototype,"pos",{get:function(){var t=this.hsla;return(32*t[0]+16*t[2]+8*t[1]|0)>>>0},enumerable:!1,configurable:!1}),Object.defineProperty(at.prototype,"z",{get:function(){return E(this.storage_uint8_[3])},enumerable:!1,configurable:!1}),Object.defineProperty(at.prototype,"y",{get:function(){return E(this.storage_uint8_[2])},enumerable:!1,configurable:!1}),Object.defineProperty(at.prototype,"x",{get:function(){return E(this.storage_uint8_[1])},enumerable:!1,configurable:!1}),Object.defineProperty(at.prototype,"w",{get:function(){return E(this.storage_uint8_[0])},enumerable:!1,configurable:!1}),Object.defineProperty(at.prototype,"uint32",{get:function(){return(this.storage_uint8_[3]<<24|this.storage_uint8_[2]<<16|this.storage_uint8_[1]<<8|this.storage_uint8_[0]|0)>>>0},enumerable:!1,configurable:!1}),Object.defineProperty(at.prototype,"hex",{get:function(){return"#".concat("00000000".concat(this.uint32.toString(16)).slice(-8))},enumerable:!1,configurable:!1}),Object.defineProperty(at.prototype,"ycbcra",{get:function(){var t=.299*this.r+.587*this.g+.114*this.b+0,e=-.169*this.r+-.331*this.g+.5*this.b+128,r=.5*this.r+-.419*this.g+-.081*this.b+128,n=this.a;return Uint16Array.of(0|t,0|e,0|r,0|n)},enumerable:!1,configurable:!1}),Object.defineProperty(at.prototype,"lab",{get:function(){var t,e,r=w(this.r),n=w(this.g),i=w(this.b),u=v((.2225045*r+.7168786*n+.0606169*i)/1);return r===n&&n===i?t=e=u:(t=v((.4360747*r+.3850649*n+.1430804*i)/g),e=v((.0139322*r+.0971045*n+.7141733*i)/h)),Float32Array.of(116*u-16,500*(t-u),200*(u-e),this.a)},enumerable:!1,configurable:!1}),Object.defineProperty(at.prototype,"hsla",{get:function(){var t=E(this.storage_uint8_[3]),e=E(this.storage_uint8_[2]),r=E(this.storage_uint8_[1]),n=E(this.storage_uint8_[0]);t=+t/255,e=+e/255,r=+r/255,n=+n/255;var i,u,o=Math.max(t,e,r),a=Math.min(t,e,r),f=(o+a)/2;if(o==a)i=u=0;else{var s=o-a;switch(u=f>.5?s/(2-o-a):s/(o+a),o){case t:i=(e-r)/s+(e<r?6:0);break;case e:i=(r-t)/s+2;break;case r:i=(t-e)/s+4}i/=6}return Array.of(360*i|0,100*u|0,100*f|0,100*n|0)},enumerable:!1,configurable:!1}),Object.defineProperty(at.prototype,"rgbaon4bits",{get:function(){return(L(this.storage_uint8_[3])<<3|L(this.storage_uint8_[2])<<2|L(this.storage_uint8_[1])<<1|L(this.storage_uint8_[0])<<0|0)>>>0},enumerable:!1,configurable:!1}),Object.defineProperty(at.prototype,"rgbaon6bits",{get:function(){return((16^D(this.storage_uint8_[3]))+(8^D(this.storage_uint8_[2]))+(4^D(this.storage_uint8_[1]))+(0^D(this.storage_uint8_[0]))|0)>>>0},enumerable:!1,configurable:!1}),Object.defineProperty(at.prototype,"rgbaon8bits",{get:function(){return(I(this.storage_uint8_[3])<<6|I(this.storage_uint8_[2])<<4|I(this.storage_uint8_[1])<<2|I(this.storage_uint8_[0])<<0|0)>>>0},enumerable:!1,configurable:!1}),Object.defineProperty(at.prototype,"rgbaon12bits",{get:function(){return(F(this.storage_uint8_[3])<<9|F(this.storage_uint8_[2])<<6|F(this.storage_uint8_[1])<<3|F(this.storage_uint8_[0])<<0|0)>>>0},enumerable:!1,configurable:!1}),Object.defineProperty(at.prototype,"offset",{get:function(){return z(this.storage_uint8_.byteOffset)},enumerable:!1,configurable:!1}),Object.defineProperty(at.prototype,"_slice",{get:function(){return this.storage_uint8_.slice(0,4)},enumerable:!1,configurable:!1}),Object.defineProperty(at.prototype,"_buffer",{get:function(){return this.storage_uint8_.buffer.slice(this.storage_uint8_.byteOffset,q(this.storage_uint8_.byteOffset,4))},enumerable:!1,configurable:!1}),Object.defineProperty(at.prototype,"_subarray",{get:function(){return this.storage_uint8_},enumerable:!1,configurable:!1}),Object.defineProperty(at.prototype,"set",{get:function(){return function(t){t instanceof at?this.set_from_simdope(t):this.set_from_array(t)}},enumerable:!1,configurable:!1}),Object.defineProperty(at.prototype,"set_from_array",{get:function(){return function(t){this.storage_uint8_.set(t.subarray,0)}},enumerable:!1,configurable:!1}),Object.defineProperty(at.prototype,"set_from_simdope",{get:function(){return function(t){this.storage_uint8_[0]=E(t.a),this.storage_uint8_[1]=E(t.b),this.storage_uint8_[2]=E(t.g),this.storage_uint8_[3]=E(t.r)}},enumerable:!1,configurable:!1}),Object.defineProperty(at.prototype,"set_from_buffer",{get:function(){return function(t,e){this.storage_uint8_=new Uint8Array(t,M(e),R(T(4,Q(t.byteLength,M(e))),0)),this.tail_=void 0}},enumerable:!1,configurable:!1}),Object.defineProperty(at.prototype,"get_tail_and_reset",{get:function(){return function(){var t=this.tail_;return this.tail_=void 0,t}},enumerable:!1,configurable:!1}),Object.defineProperty(at.prototype,"reset_tail",{get:function(){return function(){this.tail_=void 0}},enumerable:!1,configurable:!1}),Object.defineProperty(at.prototype,"set_tail",{get:function(){return function(t,e){void 0!==e&&(e|=0,t.multiply_a_255(0|e)),this.tail_=t}},enumerable:!1,configurable:!1}),Object.defineProperty(at.prototype,"simplify",{get:function(){return function(t){t=n(t),this.storage_uint8_[0]=x(r(this.a/t),t),this.storage_uint8_[1]=x(r(this.b/t),t),this.storage_uint8_[2]=x(r(this.g/t),t),this.storage_uint8_[3]=x(r(this.r/t),t)}},enumerable:!1,configurable:!1}),Object.defineProperty(at.prototype,"normalize",{get:function(){return function(){var t=this.r+this.g+this.b|0;this.storage_uint8_[1]=B(this.b/t*3|0,0,255),this.storage_uint8_[2]=B(this.g/t*3|0,0,255),this.storage_uint8_[3]=B(this.r/t*3|0,0,255)}},enumerable:!1,configurable:!1}),Object.defineProperty(at.prototype,"set_out_of",{get:function(){return function(t,e,r,n){return this.storage_uint8_[0]=E(t),this.storage_uint8_[1]=E(e),this.storage_uint8_[2]=E(r),this.storage_uint8_[3]=E(n),this}},enumerable:!1,configurable:!1}),Object.defineProperty(at.prototype,"skin",{get:function(){var t=this.ycbcra,e=t[1],r=t[2];return 80<=e&&e<=120&&133<=r&&r<=173},enumerable:!1,configurable:!1}),at.prototype.get_subarray=function(){return this._subarray},at.prototype.get_slice=function(){return this._slice},at.prototype.get_buffer=function(){return this._buffer},at.blend_all=function(t,e,r){var i,u,o,a=t.r,f=t.g,s=t.b,_=t.a,c=1,l=0|e.length;for(o=0;o<l;o++)i=e[o],c+=u=n(r[o]),a+=i.r*u|0,f+=i.g*u|0,s+=i.b*u|0,_+=i.a*u|0;for(ut[0]=E(_/c|0),ut[1]=E(s/c|0),ut[2]=E(f/c|0),ut[3]=E(a/c|0),t.set_from_array(ut),o=0;o<l;o++)e[o].set_from_array(ut)},at.prototype.blend_with_tails=function(t){t|=0;for(var e=0,r=this.get_tail_and_reset();r instanceof at;)e=E(0!=(0|t)?S(q(this.a,r.a)):G(H(x(G(r.a),G(this.a))))),at.merge_scale_of_255_a_fixed(r,C(V(r.a),e),this,H(x(this.a,C(V(G(r.a)),e))),e),r=r.get_tail_and_reset()},at.prototype.blend_with=function(t,e,r,n){return r|=0,n|=0,e|=0,t.multiply_a_255(0|e),0!=(0|r)?(this.is_fully_transparent()?t.set_from_array(it):t.is_fully_transparent()&&this.set_from_array(it),this):(e=E(0!=(0|n)?S(q(this.a,t.a)):G(H(x(G(t.a),G(this.a))))),at.merge_scale_of_255_a_fixed(t,C(V(t.a),e),this,H(x(this.a,C(V(G(t.a)),e))),e),this)},at.prototype.get_difference_with=function(t){return at.new_of(K(this.r,t.r),K(this.g,t.g),K(this.b,t.b),K(this.a,t.a))},at.prototype.sum_rgba=function(){return q(q(this.r,this.g),q(this.b,this.a))},at.prototype.sum_rgb=function(){return q(q(this.r,this.g),this.b)},at.prototype.is_dark=function(){return X(this.sum_rgb(),384)},at.prototype.is_skin=function(){return this.skin},at.prototype.is_not_skin=function(){return!this.skin},at.prototype.is_fully_transparent=function(){return W(this.a,0)},at.prototype.is_fully_opaque=function(){return W(this.a,255)},at.prototype.is_not_fully_transparent=function(){return!this.is_fully_transparent()},at.prototype.is_not_fully_opaque=function(){return!this.is_fully_opaque()},at.prototype.match_with=function(t,e){return 255==(e=(0|e)>>>0)||(0===e?this.uint32==t.uint32:K(this.r-t.r|0)<(0|e)&&K(this.g-t.g|0)<(0|e)&&K(this.b-t.b|0)<(0|e)&&K(this.a-t.a|0)<(0|e)&&!0)},at.prototype.euclidean_match_with=function(t,e){return e=n(e),ot[0]=n(A-n(K(this.a-t.a|0)/b[3])),ot[1]=n(ot[0]*ot[0]-k),n(u(s[0]*i(this.r-t.r|0)+s[1]*i(this.g-t.g|0)+s[2]*i(this.b-t.b|0)|0)/O)<n(e*ot[1])},at.prototype.manhattan_match_with=function(t,e){return e=n(e),ot[0]=n(A-n(K(this.a-t.a|0)/b[3])),ot[1]=n(ot[0]*ot[0]-k),n((s[0]*K(this.r-t.r|0)+s[1]*K(this.g-t.g|0)+s[2]*K(this.b-t.b|0)|0)/P)<n(e*ot[1])},at.prototype.cie76_match_with=function(t,e){e=n(e),ot[0]=n(A-n(K(this.a-t.a|0)/b[3])),ot[1]=n(ot[0]*ot[0]-k);var r=this.lab,o=t.lab;return n(u(i(r[0]-o[0])+i(r[1]-o[1])+i(r[2]-o[2])|0)/j)<n(e*ot[1])},at.prototype.set_r=function(t){return this._subarray[3]=E(t),this},at.prototype.set_g=function(t){return this._subarray[2]=E(t),this},at.prototype.set_b=function(t){return this._subarray[1]=E(t),this},at.prototype.set_a=function(t){return this._subarray[0]=E(t),this},at.prototype.to_greyscale=function(t){var e=this._subarray;return e[1]=e[2]=e[3]=E(this.sum_rgb()/3|0),this},at.prototype.to_greyscale_luma=function(t){var e=this._subarray;return e[1]=e[2]=e[3]=E((this.r*s[0]+this.g*s[1]+this.b*s[2])/3|0),this},at.prototype.multiply_a_255=function(t){this._subarray[0]=E(H(x(0|this.a,0|t)))},at.prototype.copy=function(){return new at(this._slice.buffer)},at.with_r=function(t,e){var r=t.get_slice();return r[3]=E(e),new at(r.buffer)},at.with_g=function(t,e){var r=t.get_slice();return r[2]=E(e),new at(r.buffer)},at.with_b=function(t,e){var r=t.get_slice();return r[1]=E(e),new at(r.buffer)},at.with_a=function(t,e){var r=t.get_slice();return r[0]=E(e),new at(r.buffer)},at.with_inverse=function(t){var e=t.get_slice();return e[3]=G(e[3]),e[2]=G(e[2]),e[1]=G(e[1]),e[0]=G(e[0]),new at(e.buffer)},at.match=function(t,e,r){return t.match_with(e,r)},at.blend=function(t,e,r,n,i){return t.copy().blend_with(e,r,n,i)},at.prototype.merge_with_a_fixed=function(t,e){e=E(e);var r=this._subarray;r[0]=E(e),r[1]=q(this.b,t.b),r[2]=q(this.g,t.g),r[3]=q(this.r,t.r),t.set_from_simdope(this)},at.merge_scale_of_255_a_fixed=function(t,e,r,n,i){e=E(e),n=E(n),i=E(i);var u=t.get_subarray(),o=r.get_subarray();u[1]=H(x(t.b,e)),u[2]=H(x(t.g,e)),u[3]=H(x(t.r,e)),o[1]=H(x(r.b,n)),o[2]=H(x(r.g,n)),o[3]=H(x(r.r,n)),u[0]=E(i),u[1]=q(t.b,r.b),u[2]=q(t.g,r.g),u[3]=q(t.r,r.r),o[0]=u[0],o[1]=u[1],o[2]=u[2],o[3]=u[3]},at.scale_rgb_of_on_255=function(t,e,r,n){var i=t.get_subarray();i[1]=H(x(t.b,n)),i[2]=H(x(t.g,r)),i[3]=H(x(t.r,e))},at.merge_with_a_fixed=function(t,e,r){var n=t.get_subarray();n[0]=E(r),n[1]=q(t.b,e.b),n[2]=q(t.g,e.g),n[3]=q(t.r,e.r),e.set_from_array(n)},at.blend_all_four=function(t,e,r,n,i,u,o,a,f,s,_,c,l,b){b|=0,0!=(l|=0)&&((t.is_fully_transparent()||i.is_fully_transparent())&&(nt[0]=1),(e.is_fully_transparent()||u.is_fully_transparent())&&(nt[1]=1),(r.is_fully_transparent()||o.is_fully_transparent())&&(nt[2]=1),(n.is_fully_transparent()||a.is_fully_transparent())&&(nt[3]=1)),f=E(f),s=E(s),_=E(_),c=E(c),i.multiply_a_255(f),u.multiply_a_255(s),o.multiply_a_255(_),a.multiply_a_255(c),0!=(0|b)?(tt[0]=ft(t.a,f),tt[1]=ft(e.a,s),tt[2]=ft(r.a,_),tt[3]=ft(n.a,c)):(tt[0]=st(i.a,t.a),tt[1]=st(u.a,e.a),tt[2]=st(o.a,r.a),tt[3]=st(a.a,n.a)),et[0]=_t(i.a,tt[0]),et[1]=_t(u.a,tt[1]),et[2]=_t(o.a,tt[2]),et[3]=_t(a.a,tt[3]),rt[0]=ct(t.a,i.a,tt[0]),rt[1]=ct(e.a,u.a,tt[1]),rt[2]=ct(r.a,o.a,tt[2]),rt[3]=ct(n.a,a.a,tt[3]),i.set_out_of(0,H(x(i.b,et[0])),H(x(i.g,et[0])),H(x(i.r,et[0]))),u.set_out_of(0,H(x(u.b,et[1])),H(x(u.g,et[1])),H(x(u.r,et[1]))),o.set_out_of(0,H(x(o.b,et[2])),H(x(o.g,et[2])),H(x(o.r,et[2]))),a.set_out_of(0,H(x(a.b,et[3])),H(x(a.g,et[3])),H(x(a.r,et[3]))),t.set_out_of(0,H(x(t.b,rt[0])),H(x(t.g,rt[0])),H(x(t.r,rt[0]))),e.set_out_of(0,H(x(e.b,rt[1])),H(x(e.g,rt[1])),H(x(e.r,rt[1]))),r.set_out_of(0,H(x(r.b,rt[2])),H(x(r.g,rt[2])),H(x(r.r,rt[2]))),n.set_out_of(0,H(x(n.b,rt[3])),H(x(n.g,rt[3])),H(x(n.r,rt[3]))),t.merge_with_a_fixed(i,tt[0]),e.merge_with_a_fixed(u,tt[1]),r.merge_with_a_fixed(o,tt[2]),n.merge_with_a_fixed(a,tt[3]),0!=(0|nt[0])&&(t.set_out_of(0,0,0,0),i.set_out_of(0,0,0,0)),0!=(0|nt[1])&&(e.set_out_of(0,0,0,0),u.set_out_of(0,0,0,0)),0!=(0|nt[2])&&(r.set_out_of(0,0,0,0),o.set_out_of(0,0,0,0)),0!=(0|nt[3])&&(n.set_out_of(0,0,0,0),a.set_out_of(0,0,0,0))},at.plus=function(t,e){return ut[3]=E(T(255,N(t.r,e.r))),ut[2]=E(T(255,N(t.g,e.g))),ut[1]=E(T(255,N(t.b,e.b))),ut[0]=E(T(255,N(t.a,e.a))),new at(ut.slice(0,4).buffer)},at.minus=function(t,e){return ut[3]=E(R(0,Q(t.r,e.r))),ut[2]=E(R(0,Q(t.g,e.g))),ut[1]=E(R(0,Q(t.b,e.b))),ut[0]=E(R(0,Q(t.a,e.a))),new at(ut.slice(0,4).buffer)},at.average=function(t,e){return ut[3]=E(S(q(t.r,e.r))),ut[2]=E(S(q(t.g,e.g))),ut[1]=E(S(q(t.b,e.b))),ut[0]=E(S(q(t.a,e.a))),new at(ut.slice(0,4).buffer)};var lt=function(t,e,r){if(!(this instanceof lt))return new lt(t);void 0!==t?void 0!==t.data?this.storage_=new Uint32Array(t.data.slice(0,t.data.length).reverse().buffer).reverse().buffer:void 0!==t.buffer?this.storage_=t.buffer:this.storage_=t:this.storage_=new ArrayBuffer(0),e|=0,r=0|r||0|this.storage_.byteLength,this.storage_uint8_array_=new Uint8Array(this.storage_,e,r),this.storage_uint32_array_=new Uint32Array(this.storage_,e,z(r))};return Object.defineProperty(lt.prototype,"length",{get:function(){return this.storage_uint32_array_.length},enumerable:!1,configurable:!1}),Object.defineProperty(lt.prototype,"_buffer",{get:function(){return this.storage_},enumerable:!1,configurable:!1}),Object.defineProperty(lt.prototype,"buffer_setUint8",{get:function(){return function(t,e){return this.storage_uint8_array_[0|t]=E(0|e)}},enumerable:!1,configurable:!1}),Object.defineProperty(lt.prototype,"get_deduplicated_uint32a",{get:function(){return function(t){return Uint32Array.from(new Set(this.storage_uint32_array_))}},enumerable:!1,configurable:!1}),Object.defineProperty(lt.prototype,"buffer_getUint8",{get:function(){return function(t){return this.storage_uint8_array_[0|t]}},enumerable:!1,configurable:!1}),Object.defineProperty(lt.prototype,"buffer_getUint8a",{get:function(){return function(t,e){return e=q(t|=0,M(e=(e|=0)||1)),this.storage_uint8_array_.subarray(t,e)}},enumerable:!1,configurable:!1}),Object.defineProperty(lt.prototype,"buffer_setUint32",{get:function(){return function(t,e){this.storage_uint32_array_[0|t]=J(e)}},enumerable:!1,configurable:!1}),Object.defineProperty(lt.prototype,"buffer_getUint32",{get:function(){return function(t){return this.storage_uint32_array_[0|t]}},enumerable:!1,configurable:!1}),Object.defineProperty(lt.prototype,"subarray_uint32",{get:function(){return function(t,e){return t|=0,e=(e|=0)||this.length,this.storage_uint32_array_.subarray(t,e)}},enumerable:!1,configurable:!1}),Object.defineProperty(lt.prototype,"slice_uint32",{get:function(){return function(t,e){return t|=0,e=(e|=0)||this.length,this.storage_uint32_array_.slice(t,e)}},enumerable:!1,configurable:!1}),Object.defineProperty(lt.prototype,"subarray_uint8",{get:function(){return function(t,e){return t|=0,e|=0,this.storage_uint8_array_.subarray(M(t),M(e))}},enumerable:!1,configurable:!1}),Object.defineProperty(lt.prototype,"slice_uint8",{get:function(){return function(t,e){return t|=0,e|=0,this.storage_uint8_array_.slice(M(t),M(e))}},enumerable:!1,configurable:!1}),lt.prototype.get_image_data=function(){return new Uint8Array(this.slice_uint32(0,this.length).reverse().buffer).reverse()},lt.prototype.get_element=function(t,e){return void 0!==e?(e.set_from_buffer(this._buffer,0|t),e):new at(this._buffer,0|t)},lt.prototype.subarray=function(t,e){return this.buffer_getUint8a(0|t,0|e)},lt.prototype.set_element=function(t,e){this.buffer_setUint32(0|t,J(e.uint32))},lt.prototype.set_uint32_element=function(t,e){this.buffer_setUint32(0|t,J(e))},lt.prototype.get_uint32_element=function(t){return t|=0,this.buffer_getUint32(t)},lt.prototype.get_sub_uint8a=function(t,e){return t|=0,e|=0,this.buffer_getUint8a(M(t),e)},lt.prototype.get_slice_uint8a=function(t,e){return t|=0,e|=0,this.buffer_getUint8a(M(t),e).slice(0,M(e||1))},lt.prototype.get_buffer=function(t,e){return t|=0,e|=0,this.buffer_getUint8a(M(t),e).buffer},t.simdops=Z,t.Color=at,t.SIMDopeColor=t.Color,t.Colors=lt,t.SIMDopeColors=t.Colors,t}();t?t.exports=e:window.SIMDOPE=e,t=t.exports}();